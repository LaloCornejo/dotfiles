source-file ~/.dotfiles/tmux/tmux.reset.conf
set-option -g default-terminal 'screen-256color'
set-option -g terminal-overrides ',xterm-256color:RGB'

set -g prefix ^A
set -g base-index 0              # start indexing windows at 1 instead of 0
set -g detach-on-destroy off     # don't exit from tmux when closing a session
set -g escape-time 0             # zero-out escape time delay
set -g history-limit 1000000     # increase history size (from 2,000)
set -g renumber-windows on       # renumber all windows when any window is closed
set -g set-clipboard on          # use system clipboard
set -g status-position top       # macOS / darwin style
set -g default-terminal "${TERM}"
set -g mode-keys vi
set -g pane-active-border-style "fg=#bb9af7,bg=default"
set -g pane-border-style "fg=#414868,bg=default"

# Keybindings

# Vim-style copy mode
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode-vi r send-keys -X rectangle-toggle
bind -T copy-mode-vi j send-keys Down
bind -T copy-mode-vi k send-keys Up

# Window and pane management
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Window navigation  
bind -r C-h previous-window
bind -r C-l next-window

# Session management
bind C-c new-session
bind C-f command-prompt -p find-session 'switch-client -t %%'

# Reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# Clear screen and history
bind C-k send-keys -R \; send-keys C-l \; clear-history

# Toggle synchronize panes
bind y setw synchronize-panes

set -g @fzf-url-fzf-options '-p 60%,30% --prompt="ÔÇé   " --border-label=" Open URL "'
set -g @fzf-url-history-limit '2000'

# Essential plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Navigation and session management
set -g @plugin 'omerxx/tmux-sessionx'
set -g @plugin 'omerxx/tmux-floax'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-pain-control'

# Search and selection
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'laktak/extrakto'

# Visual enhancements
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'alexwforsythe/tmux-which-key'

# System monitoring and info
set -g @plugin 'themoderngeek/tmux_apple_music_plugin'
set -g @plugin 'xamut/tmux-weather'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'

# Development tools
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-logging'

# Prefix highlight configuration
set -g @prefix_highlight_show_copy_mode 'on'
set -g @prefix_highlight_copy_mode_attr 'fg=#1a1b26,bg=#e0af68,bold'
set -g @prefix_highlight_prefix_prompt 'PREFIX'
set -g @prefix_highlight_copy_prompt 'COPY'
set -g @prefix_highlight_fg '#1a1b26'
set -g @prefix_highlight_bg '#bb9af7'


# Tokyo Night Theme - transparent with visible window info
set -g status-left-length 100
set -g status-right-length 100
set -g status-style "fg=default,bg=default"

# Window status styling - transparent background but visible text
set -g window-status-style "fg=#565f89,bg=default"
set -g window-status-current-style "fg=#bb9af7,bg=default,bold"
set -g window-status-activity-style "fg=#e0af68,bg=default"

# Pane borders
set -g pane-border-style "fg=#414868"
set -g pane-active-border-style "fg=#bb9af7"

# Message styling
set -g message-style "fg=#1a1b26,bg=#bb9af7"
set -g message-command-style "fg=#1a1b26,bg=#7aa2f7"

# Mode styling
set -g mode-style "fg=#1a1b26,bg=#bb9af7"

# Status bar with colored backgrounds behind text only
set -g status-left "#[fg=#1a1b26,bg=#7aa2f7,bold] Û∞ä† #S #[fg=default,bg=default] "
set -g status-right " #{prefix_highlight}#[fg=#1a1b26,bg=#bb9af7,bold] %H:%M #[fg=default,bg=default] #[fg=#1a1b26,bg=#7aa2f7,bold] #{b:pane_current_path} "

# Window status with transparent background and nerd font icons
set -g window-status-format " #[fg=#565f89]#I #[fg=#c0caf5]#W "
set -g window-status-current-format " #[fg=#bb9af7,bold]#I #[fg=#bb9af7,bold]#W "

# Enable automatic window renaming with nerd font icons
set -g automatic-rename on

# Plugin configurations

# SessionX configuration
set -g @sessionx-bind 'o'
set -g @sessionx-bind-new-window 'ctrl-n'
set -g @sessionx-bind-kill-session 'ctrl-x'
set -g @sessionx-bind-configuration-path 'ctrl-c'
set -g @sessionx-bind-tree-mode 'ctrl-t'
set -g @sessionx-bind-zo-new-window 'ctrl-y'
set -g @sessionx-bind-rename-session 'ctrl-r'
set -g @sessionx-auto-accept 'off'
set -g @sessionx-custom-paths '/Users/lalocornejo/.dotfiles,/Users/lalocornejo/Projects'
set -g @sessionx-x-path '~/.dotfiles'
set -g @sessionx-window-height '85%'
set -g @sessionx-window-width '75%'
set -g @sessionx-zoxide-mode 'on'
set -g @sessionx-custom-paths-subdirectories 'true'
set -g @sessionx-filter-current 'false'
set -g @sessionx-preview-location 'right'
set -g @sessionx-preview-ratio '55%'

# Floax configuration
set -g @floax-border-color '#bb9af7'
set -g @floax-text-color '#7aa2f7'
set -g @floax-bind 'p'
set -g @floax-change-path 'true'
set -g @floax-width '80%'
set -g @floax-height '80%'

# Tmux-thumbs configuration
set -g @thumbs-key F
set -g @thumbs-alphabet colemak
set -g @thumbs-reverse enabled
set -g @thumbs-unique enabled

# Extrakto configuration
set -g @extrakto_key "tab"
set -g @extrakto_default_opt "w"
set -g @extrakto_split_direction "auto"
set -g @extrakto_copy_key "enter"
set -g @extrakto_insert_key "tab"

# Tmux-fzf configuration
TMUX_FZF_LAUNCH_KEY="C-f"

# Vim tmux navigator configuration
set -g @vim_navigator_mapping_left "C-h"
set -g @vim_navigator_mapping_down "C-j"
set -g @vim_navigator_mapping_up "C-k"
set -g @vim_navigator_mapping_right "C-l"
set -g @vim_navigator_mapping_prev ""

# Pain control configuration (additional pane controls)
set -g @pain-control-bind-key "C-a"

# Resurrect and continuum configuration
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-save-shell-history 'on'

# CPU and battery configuration
set -g @cpu_low_icon "·öã"
set -g @cpu_medium_icon "·öå"
set -g @cpu_high_icon "·öç"
set -g @cpu_low_fg_color "#[fg=#9ece6a]"
set -g @cpu_medium_fg_color "#[fg=#e0af68]"
set -g @cpu_high_fg_color "#[fg=#f7768e]"

set -g @batt_icon_status_charged 'üîã'
set -g @batt_icon_status_charging '‚ö°'
set -g @batt_icon_status_discharging 'üëé'
set -g @batt_color_status_primary_charged '#9ece6a'
set -g @batt_color_status_primary_charging '#e0af68'

run ~/.tmux/plugins/tpm/tpm
